<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown to PDF Converter</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/lib/marked.umd.min.js"></script>
    
    <!-- Load pdfmake for reliable vector-based PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    
    <style>
        /* Apply Inter font globally and ensure a clean box model */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }

        /* Custom styling for the rendered HTML output (Prose simulation) */
        #rendered-html {
            /* Padding now acts as the visual margin for the preview only */
            padding: 2.5rem; 
            line-height: 1.5; 
            word-break: break-word; 
        }

        /* The container for each segment of content defined by the ---PAGEBREAK--- */
        .pdf-page-section {
            margin: 0; 
            padding: 0;
            overflow: hidden; 
        }
        
        /* Basic Markdown styling */
        #rendered-html h1 { 
            font-size: 1.8em;
            font-weight: bold; 
            border-bottom: 1px solid #a5b4fc;
            padding-bottom: 0.3em; 
            margin-top: 1em; 
        }
        #rendered-html h2 { 
            font-size: 1.4em;
            font-weight: bold; 
            margin-top: 1em; 
        }
        #rendered-html p { 
            font-size: 0.95em;
            margin-bottom: 1.25em; 
            line-height: 1.6; 
        }
        #rendered-html ul, #rendered-html ol { margin-left: 1.5em; margin-bottom: 1em; padding-left: 0.5em; }
        #rendered-html ul { list-style: disc; }
        #rendered-html ol { list-style: decimal; }
        
        #rendered-html code { background-color: #e5e7eb; padding: 2px 4px; border-radius: 4px; font-family: 'SF Mono', monospace; }
        #rendered-html pre { 
            background-color: #1f2937; 
            color: #f9fafb; 
            padding: 1em; 
            border-radius: 8px; 
            overflow-x: auto; 
            margin-bottom: 1em; 
        }
        
        /* --- TABLE STYLES --- */
        #rendered-html table {
            margin-left: auto;
            margin-right: auto;
            width: 100%; 
            max-width: 700px;
            border-collapse: collapse;
            margin-bottom: 1.5em;
            border-radius: 8px;
            overflow: hidden; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        #rendered-html th {
            background-color: #e0e7ff;
            color: #3730a3;
            font-weight: 700;
            font-size: 0.9em; 
            padding: 0.75em 1em; 
            text-align: left;
            border: 1px solid #c7d2fe;
        }
        
        #rendered-html td {
            padding: 0.75em 1em; 
            border: 1px solid #e5e7eb;
            text-align: left;
            word-wrap: break-word; 
        }
        /* --- END TABLE STYLES --- */

        /* Styles for the message box */
        #message-box {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 50;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            transition: opacity 0.3s ease-in-out;
        }

        /* Class for the generating state on the button */
        .generating-button {
            cursor: not-allowed;
            background-color: #4b5563 !important;
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

    <!-- Status Message Box -->
    <div id="message-box" class="hidden"></div>

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-extrabold text-gray-800">Markdown Live Preview & PDF Converter</h1>
            <p class="text-gray-500 mt-2">Type Markdown, see the rendered HTML, and export it as a multi-page PDF. Use **---PAGEBREAK---** for manual page breaks.</p>
        </header>
        
        <!-- Action Button Panel -->
        <div class="flex flex-col sm:flex-row justify-end items-stretch sm:items-center mb-4 gap-3">
            <!-- Filename Input -->
            <input 
                id="pdf-filename-input"
                type="text" 
                placeholder="Output Filename (e.g., character-sheet)"
                value="Theron_The_Iron_Quill_Character_Sheet"
                class="flex-grow sm:flex-grow-0 sm:w-64 p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 ease-in-out"
            >

            <!-- Download Button -->
            <button id="download-pdf-btn" 
                    class="px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition duration-150 ease-in-out flex items-center justify-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                Download PDF
            </button>
        </div>

        <main class="flex flex-col md:flex-row gap-6 h-[70vh]">
            <!-- 1. Markdown Input Panel -->
            <div class="md:w-1/2 flex flex-col h-full">
                <h2 class="text-xl font-semibold mb-2 text-gray-700">Markdown Input</h2>
                <textarea
                    id="markdown-input"
                    class="flex-grow w-full p-4 border border-gray-300 rounded-lg shadow-lg focus:ring-indigo-500 focus:border-indigo-500 resize-none transition duration-150 ease-in-out"
                    placeholder="Enter your Markdown here..."
                ></textarea>
            </div>

            <!-- 2. HTML Output Panel -->
            <div class="md:w-1/2 flex flex-col h-full">
                <h2 class="text-xl font-semibold mb-2 text-gray-700">HTML Output</h2>
                
                <div class="bg-white border border-gray-300 rounded-lg shadow-lg overflow-hidden h-full flex flex-col">
                    <!-- Tabs -->
                    <div class="flex border-b border-gray-200">
                        <button id="tab-rendered" class="tab-button px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-tl-lg transition duration-150">
                            Rendered View (PDF Source)
                        </button>
                        <button id="tab-raw" class="tab-button px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition duration-150">
                            Raw HTML Source
                        </button>
                    </div>

                    <!-- Tab Content: Rendered HTML -->
                    <div id="content-rendered" class="p-4 overflow-y-auto flex-grow h-0">
                        <!-- IMPORTANT: The 'rendered-html' container is the source for the PDF -->
                        <div id="rendered-html" class="prose max-w-none"></div>
                    </div>

                    <!-- Tab Content: Raw HTML Source -->
                    <div id="content-raw" class="hidden h-full p-0 flex-grow">
                        <textarea
                            id="raw-html-output"
                            readonly
                            class="w-full h-full p-4 text-sm bg-gray-50 text-gray-800 focus:outline-none resize-none"
                            placeholder="Raw HTML output will appear here..."
                        ></textarea>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer for library credit -->
        <footer class="text-center mt-8 text-gray-500 text-sm">
            Uses <a href="https://marked.js.org/" target="_blank" class="text-indigo-600 hover:underline">Marked.js</a> (conversion) and <a href="https://pdfmake.github.io/docs/" target="_blank" class="text-indigo-600 hover:underline">pdfmake</a> (PDF generation).
        </footer>
    </div>

    <script>
        const markdownInput = document.getElementById('markdown-input');
        const renderedHtmlContainer = document.getElementById('rendered-html');
        const rawHtmlOutput = document.getElementById('raw-html-output');
        const downloadPdfBtn = document.getElementById('download-pdf-btn');
        const filenameInput = document.getElementById('pdf-filename-input');
        const messageBox = document.getElementById('message-box');
        
        const tabRendered = document.getElementById('tab-rendered');
        const tabRaw = document.getElementById('tab-raw');
        const contentRendered = document.getElementById('content-rendered');
        const contentRaw = document.getElementById('content-raw');

        // Configure Marked.js once globally to handle line breaks within paragraphs
        marked.setOptions({
            breaks: true, // Crucial for converting single newlines to <br>
            gfm: true     // Use GitHub Flavored Markdown
        });

        // Function to display temporary status messages
        function showMessage(message, type = 'success') {
            messageBox.textContent = message;
            messageBox.classList.remove('hidden', 'bg-red-500', 'bg-green-500', 'bg-blue-500', 'bg-gray-700');

            if (type === 'success') {
                messageBox.classList.add('bg-indigo-500', 'text-white');
            } else if (type === 'error') {
                messageBox.classList.add('bg-red-500', 'text-white');
            } else if (type === 'info') {
                 messageBox.classList.add('bg-gray-700', 'text-white');
            }

            // Hide the box after 4 seconds
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 4000);
        }

        // --- CORE CONVERSION & PREPARATION (Markdown to HTML) ---

        function convertMarkdown() {
            const markdownText = markdownInput.value;
            // Ensure we split only on the exact page break marker
            const segments = markdownText.split(/---PAGEBREAK---/g);
            
            let fullHtml = '';
            
            segments.forEach((mdSegment, index) => {
                const segmentHtml = marked.parse(mdSegment.trim());
                fullHtml += `<div class="pdf-page-section" data-page-index="${index}">${segmentHtml}</div>`;
            });

            renderedHtmlContainer.innerHTML = fullHtml;
            rawHtmlOutput.value = fullHtml;
        }


        /**
         * Recursively processes a DOM node's children to create a pdfmake text array structure.
         */
        function processInlineFormatting(node) {
            let parts = [];
            
            node.childNodes.forEach(child => {
                if (child.nodeType === 3) { // Text node
                    const text = child.textContent;
                    
                    if (text.trim() !== '') {
                         parts.push({ text: text });
                    } else if (text.match(/\s+/)) {
                        parts.push({ text: ' ' });
                    }
                    
                } else if (child.nodeType === 1) { // Element node
                    const tag = child.tagName.toLowerCase();
                    
                    if (tag === 'br') {
                        parts.push({ text: '\n' });
                        return;
                    }
                    
                    const subParts = processInlineFormatting(child); // Recurse

                    if (subParts.length > 0) {
                        const style = {};
                        
                        if (tag === 'strong' || tag === 'b') {
                            style.bold = true;
                        } else if (tag === 'em' || tag === 'i') {
                            style.italics = true;
                        } else if (tag === 'code') {
                            style.font = 'RobotoMono';
                            style.fontSize = 9.5;
                            style.background = '#e5e7eb';
                            style.color = '#1f2937';
                            style.noWrap = true; 
                        } else if (tag === 'a') {
                            style.color = 'blue';
                            style.decoration = 'underline';
                            style.link = child.getAttribute('href');
                        }

                        subParts.forEach(p => {
                            if (p.text === '\n') {
                                parts.push(p);
                            } else {
                                parts.push({ ...p, ...style });
                            }
                        });
                    }
                }
            });
            return parts;
        }

        /**
         * Converts the rendered HTML DOM structure into a pdfmake Document Definition object.
         */
        function htmlToPdfmakeDefinition(element) {
            let content = [];
            const MARGIN_MM = 15; // Set PDF margins in millimeters
            
            // Helper function to convert HTML table to pdfmake structure
            function processTable(tableElement) {
                const tableBody = [];
                // Get all rows from the table, handling both thead and tbody rows
                const rows = tableElement.querySelectorAll('tr'); 
                
                let headerRowsCount = 0;

                rows.forEach((row, rowIndex) => {
                    const isHeaderRow = row.querySelector('th') !== null;
                    const tableRow = [];
                    
                    if (isHeaderRow) {
                        // Count actual header rows
                        if (row.closest('thead')) headerRowsCount++;

                        row.querySelectorAll('th, td').forEach(cell => {
                            const cellContent = processInlineFormatting(cell);
                            tableRow.push({
                                text: cellContent,
                                style: 'tableHeader',
                                margin: [5, 5, 5, 5] 
                            });
                        });
                    } else {
                        // Standard data row
                        row.querySelectorAll('td, th').forEach(cell => {
                            const cellContent = processInlineFormatting(cell);
                            tableRow.push({
                                text: cellContent,
                                style: 'tableCell',
                                margin: [5, 5, 5, 5] 
                            });
                        });
                    }
                    tableBody.push(tableRow);
                });

                if (tableBody.length === 0) return null;

                // CRITICAL: dontBreakIfNecessary: true prevents the table from splitting!
                return {
                    table: {
                        headerRows: headerRowsCount, // Set the number of rows to be treated as headers
                        body: tableBody,
                        widths: Array(tableBody[0].length).fill('auto'), // Use 'auto' to fit content better
                    },
                    layout: 'lightHorizontalLines',
                    margin: [0, 5, 0, 15], 
                    dontBreakIfNecessary: true, 
                };
            }

            // Iterate over the sections generated by '---PAGEBREAK---'
            element.querySelectorAll('.pdf-page-section').forEach(section => {
                const isManualBreak = section.dataset.pageIndex > 0;

                if (isManualBreak) {
                    content.push({ text: '', pageBreak: 'before' });
                }

                // Process children nodes within the section
                section.childNodes.forEach(node => {
                    if (node.nodeType === 1) {
                        const el = node;
                        const tag = el.tagName.toLowerCase();
                        
                        if (tag === 'h1') {
                            content.push({ text: el.textContent.trim(), style: 'header1', margin: [0, 10, 0, 5] });
                        } else if (tag === 'h2') {
                            content.push({ text: el.textContent.trim(), style: 'header2', margin: [0, 10, 0, 5] });
                        } else if (tag === 'p') {
                            const paragraphContent = processInlineFormatting(el);
                            content.push({ text: paragraphContent, margin: [0, 0, 0, 14] }); 
                        } else if (tag === 'pre') {
                            const codeText = el.textContent.trim();
                            content.push({
                                text: codeText,
                                font: 'RobotoMono', 
                                fontSize: 9,
                                background: '#e5e7eb', 
                                color: '#1f2937',
                                alignment: 'left',
                                margin: [0, 5, 0, 10],
                                preserveTrailingSpaces: true,
                                dontBreakIfNecessary: true 
                            });
                        } else if (tag === 'ul' || tag === 'ol') {
                            const listItems = [];
                            el.querySelectorAll('li').forEach(li => {
                                const listItemContent = processInlineFormatting(li);
                                const item = { text: listItemContent };
                                listItems.push(item);
                            });

                            const list = tag === 'ul' 
                                ? { ul: listItems, margin: [0, 5, 0, 10] } 
                                : { ol: listItems, margin: [0, 5, 0, 10] };
                                
                            content.push(list);
                        } else if (tag === 'table') {
                            const tableDef = processTable(el);
                            if (tableDef) content.push(tableDef);
                        }
                    }
                });
            });

            // Define the document structure, styles, and defaults
            return {
                pageSize: 'A4',
                pageMargins: [MARGIN_MM, MARGIN_MM, MARGIN_MM, MARGIN_MM],
                content: content,
                styles: {
                    header1: {
                        fontSize: 18,
                        bold: true,
                        decoration: 'underline',
                        color: '#4f46e5'
                    },
                    header2: {
                        fontSize: 14,
                        bold: true,
                        color: '#4f46e5'
                    },
                    tableHeader: {
                        bold: true,
                        fontSize: 10,
                        fillColor: '#e0e7ff',
                        color: '#3730a3',
                    },
                    tableCell: {
                        fontSize: 9.5,
                    }
                },
                defaultStyle: {
                    font: 'Roboto', 
                    fontSize: 10,
                },
                fonts: {
                    Roboto: {
                        normal: 'Roboto-Regular.ttf',
                        bold: 'Roboto-Medium.ttf',
                        italics: 'Roboto-Italics.ttf',
                        bolditalics: 'Roboto-MediumItalic.ttf'
                    },
                    RobotoMono: {
                        normal: 'RobotoMono-Regular.ttf',
                        bold: 'RobotoMono-Bold.ttf',
                        italics: 'RobotoMono-Italics.ttf',
                        bolditalics: 'RobotoMono-BoldItalics.ttf'
                    }
                }
            };
        }


        // --- PDF GENERATION (using pdfmake) ---

        async function generatePDF() {
            if (!markdownInput.value.trim()) {
                showMessage("Please enter some Markdown content first.", 'error');
                return;
            }

            let filename = filenameInput.value.trim();
            if (filename === '') {
                filename = 'document'; // Default if the field is empty
            }
            if (!filename.toLowerCase().endsWith('.pdf')) {
                filename += '.pdf';
            }

            // --- 1. Set Loading State ---
            downloadPdfBtn.disabled = true;
            downloadPdfBtn.classList.add('generating-button');
            downloadPdfBtn.innerHTML = '<svg class="animate-spin h-5 w-5 mr-2" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generating PDF...';
            showMessage("Generating vector PDF...", 'info');

            const element = document.getElementById('rendered-html');
            
            try {
                const docDefinition = htmlToPdfmakeDefinition(element);
                
                // Use the customizable filename here
                pdfMake.createPdf(docDefinition).download(filename, () => {
                    showMessage("PDF saved successfully!", 'success');
                });
                        
            } catch (error) {
                console.error("PDF generation failed:", error);
                showMessage("Error: PDF generation failed. Check console for details.", 'error');
            } finally {
                // Reset Button State after a short delay (to ensure download dialog opens)
                setTimeout(() => {
                    downloadPdfBtn.disabled = false;
                    downloadPdfBtn.classList.remove('generating-button');
                    downloadPdfBtn.innerHTML = '<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Download PDF';
                }, 100); 
            }
        }


        // Function to handle tab switching
        function switchTab(activeTabId) {
            // Reset styles
            tabRendered.classList.remove('bg-indigo-600', 'text-white');
            tabRendered.classList.add('text-gray-700', 'bg-white');
            tabRaw.classList.remove('bg-indigo-600', 'text-white');
            tabRaw.classList.add('text-gray-700', 'bg-white');

            contentRendered.classList.add('hidden');
            contentRaw.classList.add('hidden');

            // Set active tab styles and content
            if (activeTabId === 'tab-rendered') {
                tabRendered.classList.add('bg-indigo-600', 'text-white');
                contentRendered.classList.remove('hidden');
            } else if (activeTabId === 'tab-raw') {
                tabRaw.classList.add('bg-indigo-600', 'text-white');
                contentRaw.classList.remove('hidden');
            }
        }

        // --- Event Listeners and Initialization ---

        markdownInput.addEventListener('input', convertMarkdown);
        downloadPdfBtn.addEventListener('click', generatePDF);
        tabRendered.addEventListener('click', () => switchTab('tab-rendered'));
        tabRaw.addEventListener('click', () => switchTab('tab-raw'));

        // *** FIX APPLIED HERE: Using DOMContentLoaded for more reliable loading ***
        document.addEventListener('DOMContentLoaded', () => {
            // Auto-fill the sample text from the hidden template element
            const sampleMarkdown = document.getElementById('long-character-sheet-md').textContent.trim();
            markdownInput.value = sampleMarkdown;

            convertMarkdown();
            switchTab('tab-rendered'); 
        });
    </script>

    <!-- Hidden element to hold the Markdown source for auto-filling the input -->
    <template id="long-character-sheet-md">
# Theron "The Iron Quill" Valerius

**High Elf Lore Bard / Battle Master Fighter**
Medium Humanoid (Elf), Neutral Good

**Page 1: Core Stats & Features**

**Armor Class** 18 (Plate Armor) **Hit Points** 78 (10d8 + 20) **Speed** 30 ft.

| **STR** | **DEX** | **CON** | **INT** | **WIS** | **CHA** | 
| :---: | :---: | :---: | :---: | :---: | :---: | 
| 14 (+2) | 12 (+1) | 14 (+2) | 10 (+0) | 11 (+0) | 18 (+4) | 

**Saving Throws** Dex +4, Con +5, Cha +7 **Skills** Acrobatics +4, Deception +7, Insight +3, Perception +3, Performance +7 **Senses** Darkvision 60 ft., Passive Perception 13 **Languages** Common, Elvish, Draconic, Giant **Challenge** 7 (2,900 XP)

**Bardic Inspiration (4/Short or Long Rest).** As a Bonus Action, Theron can expend one use of his Bardic Inspiration. A creature (other than himself) within 60 feet that can hear him gains a $1d8$ Inspiration die. For 10 minutes, the creature can add the die to one ability check, attack roll, or saving throw.

**Combat Superiority (4/Short or Long Rest).** Theron has four superiority dice, which are $1d8$s. They are used to fuel his maneuvers.

**Expertise.** His proficiency bonus is doubled for any check he makes using the following skills: Performance and Deception.

**Fey Ancestry.** Theron has advantage on saving throws against being charmed, and magic can’t put him to sleep.

---PAGEBREAK---

**Page 2: Actions, Maneuvers, and Proficiencies**

**Actions**

**Multiattack.** Theron makes two melee attacks.

**Longsword.** Melee Weapon Attack: +5 to hit, reach 5 ft., one target. Hit: $1d8 + 2$ slashing damage (or $1d10 + 2$ if wielded with two hands).

**Hand Crossbow.** Ranged Weapon Attack: +4 to hit, range $30/120$ ft., one target. Hit: $1d6 + 1$ piercing damage.

**Maneuvers (Uses 1 Superiority Die)**

**Pushing Attack.** When Theron hits a creature with a weapon attack, he can expend one superiority die to attempt to drive the target back. He adds the die to the attack’s damage roll, and if the target is Large or smaller, it must make a DC 15 Strength saving throw or be pushed up to 15 feet away from him.

**Parry.** When another creature damages Theron with a melee attack, he can use his Reaction and expend one superiority die to reduce the damage by the number rolled on the die + his Dexterity modifier (+1).

**Menacing Attack.** When Theron hits a creature with a weapon attack, he can expend one superiority die to attempt to frighten the target. He adds the die to the attack’s damage roll, and the target must make a DC 15 Wisdom saving throw or be frightened of him until the end of its next turn.

**Kit and Gear Manifest (JSON Structure for Testing)**

```
{
  "inventory": [
    {"item": "Longsword", "quantity": 1, "location": "Sheath"},
    {"item": "Plate Armor", "quantity": 1, "location": "Worn"},
    {"item": "Scholar's Pack", "quantity": 1, "location": "Backpack"},
    {"item": "Holy Symbol (Lyre)", "quantity": 1, "location": "Necklace"},
    {"item": "Potion of Healing", "quantity": 3, "location": "Pouch"},
    {"item": "50 ft. Hemp Rope", "quantity": 1, "location": "Coil"},
    {"item": "Dragon Scale Token (Red)", "quantity": 1, "location": "Pocket"}
  ],
  "wealth": {
    "gold": 125,
    "silver": 40,
    "copper": 12
  }
}
```

---PAGEBREAK---

**Page 3: Spellcasting and Backstory**

**Spellcasting (Bard)**

Theron is a 6th-level spellcaster. His spellcasting ability is Charisma (Spell Save DC 15, +7 to hit with spell attacks). Theron has the following Bard spells prepared:

| **Level** | **Slots** | **Spells Known** | 
| :---: | :---: | :--- | 
| Cantrips (at will) | - | Vicious Mockery, Minor Illusion, Prestidigitation | 
| 1st | 4 | Cure Wounds, Dissonant Whispers, Faerie Fire, Healing Word | 
| 2nd | 3 | Blindness/Deafness, Enthrall, Suggestion | 
| 3rd | 3 | Dispel Magic, Hypnotic Pattern, Mass Healing Word | 

**Additional Magical Secrets.** Theron knows two spells from any class thanks to his Lore Bard training: *Shield* (1st Level Abjuration) and *Fireball* (3rd Level Evocation).

**Backstory: The Iron Quill**

Theron Valerius was not raised in a traditional elven settlement but in the heavily structured, militaristic city-state of Valerius. Expected to follow his father into the ranks of the city guard, Theron instead found himself drawn to the meticulous study of battle tactics and the power of narrative. He excelled in the Fighter Academy, earning the title "The Iron Quill" for his sharp mind and discipline, but his true passion lay in the forbidden bards' college—a place where history was analyzed, not just recorded.

After a political incident that threatened to expose his dual life, Theron fled the city, taking his plated armor and his lyre. He now uses his unique blend of martial prowess and persuasive magic to uncover conspiracies and right systemic wrongs, constantly writing down his adventures in a leather-bound journal. He seeks to balance the strict structure of his past with the chaotic beauty of genuine freedom.
    </template>
</body>
</html>